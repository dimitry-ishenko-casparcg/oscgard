////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2020 Dimitry Ishenko
// Contact: dimitry (dot) ishenko (at) (gee) mail (dot) com
//
// Distributed under the GNU GPL license. See the LICENSE.md file for details.

////////////////////////////////////////////////////////////////////////////////
#include "command.hpp"
#include "system.hpp"

#include <iostream>

////////////////////////////////////////////////////////////////////////////////
namespace src
{

////////////////////////////////////////////////////////////////////////////////
void command::operator()(const osc::message& m)
{
    src::args args = args_;

    if(auto pid = fork(); pid == child)
        exec(file_, args);
    else std::cout << "Starting " << file_ << " " << args << " as process " << pid << std::endl;
}

////////////////////////////////////////////////////////////////////////////////
}
